<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="Up" href="Notty.I.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Notty" rel="Chapter" href="Notty.html">
<link title="Notty_unix" rel="Chapter" href="Notty_unix.html">
<link title="Notty_lwt" rel="Chapter" href="Notty_lwt.html"><link title="Image formatters" rel="Section" href="#1_Imageformatters">
<link title="Attribute insertion" rel="Subsection" href="#2_Attributeinsertion">
<link title="Attribute tags" rel="Subsection" href="#attrtags">
<title>Notty.I.Fmt</title>
</head>
<body>
<div class="navbar">&nbsp;<a class="up" href="Notty.I.html" title="Notty.I">Up</a>
&nbsp;</div>
<h1>Module <a href="type_Notty.I.Fmt.html">Notty.I.Fmt</a></h1>

<pre><span class="keyword">module</span> Fmt: <code class="code"><span class="keyword">sig</span></code> <a href="Notty.I.Fmt.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Raw interface to the <code class="code"><span class="constructor">Format</span></code> module.
<p>

      <pre class="codepre"><code class="code"><span class="keyword">let</span>&nbsp;int&nbsp;=&nbsp;<span class="constructor">Format</span>.pp_print_int</code></pre>
<p>

      These images are identical:
<p>

<pre class="codepre"><code class="code"><span class="keyword">let</span>&nbsp;br&nbsp;a&nbsp;c&nbsp;=&nbsp;<span class="constructor">I</span>.(string&nbsp;a&nbsp;<span class="string">"("</span>&nbsp;&lt;|&gt;&nbsp;c&nbsp;&lt;|&gt;&nbsp;string&nbsp;a&nbsp;<span class="string">")"</span>)&nbsp;<span class="keyword">in</span><br>
<span class="keyword">let</span>&nbsp;i&nbsp;=&nbsp;<span class="constructor">I</span>.(string&nbsp;<span class="constructor">A</span>.(fg&nbsp;red)&nbsp;<span class="string">"7"</span>&nbsp;|&gt;&nbsp;br&nbsp;<span class="constructor">A</span>.(bg&nbsp;black))&nbsp;<span class="keyword">in</span><br>
<span class="keyword">if</span>&nbsp;<span class="constructor">I</span>.width&nbsp;i&nbsp;&gt;&nbsp;20&nbsp;<span class="keyword">then</span>&nbsp;i&nbsp;|&gt;&nbsp;<span class="constructor">I</span>.hcrop&nbsp;0&nbsp;(<span class="constructor">I</span>.width&nbsp;i&nbsp;-&nbsp;20)&nbsp;<span class="keyword">else</span>&nbsp;i<br>
</code></pre>
<p>

      <pre class="codepre"><code class="code"><span class="constructor">I</span>.strf&nbsp;~w:20&nbsp;<span class="string">"@{&lt;/black&gt;(@{&lt;red&gt;%a@})@}"</span>&nbsp;int&nbsp;7</code></pre>
<p>

      <pre class="codepre"><code class="code"><span class="constructor">I</span>.strf&nbsp;~w:20&nbsp;<span class="string">"@{&lt;/black&gt;(%a)@}"</span>&nbsp;(<span class="constructor">I</span>.<span class="constructor">Fmt</span>.attr&nbsp;<span class="constructor">A</span>.(fg&nbsp;red)&nbsp;int)&nbsp;7</code></pre>
<p>

      <pre class="codepre"><code class="code"><span class="constructor">I</span>.strfa&nbsp;<span class="constructor">A</span>.(bg&nbsp;black)&nbsp;<span class="string">"(@{&lt;red&gt;%d@})"</span>&nbsp;7</code></pre><br>
</div>
<hr width="100%">

<pre><span id="VALstrf"><span class="keyword">val</span> strf</span> : <code class="type">w:int -> ('a, Format.formatter, unit, <a href="Notty.html#TYPEimage">image</a>) format4 -> 'a</code></pre><div class="info ">
<code class="code">strf ~w:width format ...</code> pretty-prints like
        <code class="code"><span class="constructor">Format</span>.asprintf format ...</code>, but returns an <code class="code">image</code>.
<p>

        <code class="code">width</code> is the maximum width of the output. It is given as the margin
        hint to the underlying formatter, and the result is cropped to fit.
<p>

        <code class="code">format</code> can contain <a href="Notty.I.Fmt.html#attrtags">attribute tags</a>.<br>
</div>

<pre><span id="VALstrfa"><span class="keyword">val</span> strfa</span> : <code class="type"><a href="Notty.html#TYPEattr">attr</a> -><br>       ('a, Format.formatter, unit, <a href="Notty.html#TYPEimage">image</a>) format4 -> 'a</code></pre><div class="info ">
<code class="code">strfa attr format ...</code> is <code class="code">strf format ...</code> with <code class="code">width</code> set to an
        unspecified but large number, and <code class="code">attr</code> as the outermost attribute.<br>
</div>

<pre><span id="VALkstrf"><span class="keyword">val</span> kstrf</span> : <code class="type">w:int -><br>       (<a href="Notty.html#TYPEimage">image</a> -> 'a) -><br>       ('b, Format.formatter, unit, 'a) format4 -> 'b</code></pre><div class="info ">
<code class="code">kstrf ~w k format ...</code> is continuation-based <code class="code">strf ~w format ...</code>.<br>
</div>
<br>
<h1 id="1_Imageformatters">Image formatters</h1><br>

<pre><span id="TYPEibuf"><span class="keyword">type</span> <code class="type"></code>ibuf</span> </pre>
<div class="info ">
Storage for <a href="Notty.I.Fmt.html#VALformatter_of_image_buffer">image formatters</a>.<br>
</div>


<pre><span id="VALcreate_ibuf"><span class="keyword">val</span> create_ibuf</span> : <code class="type">unit -> <a href="Notty.I.Fmt.html#TYPEibuf">ibuf</a></code></pre><div class="info ">
<code class="code">create_ibuf ()</code> is a fresh image buffer.<br>
</div>

<pre><span id="VALreset_ibuf"><span class="keyword">val</span> reset_ibuf</span> : <code class="type"><a href="Notty.I.Fmt.html#TYPEibuf">ibuf</a> -> <a href="Notty.html#TYPEimage">image</a></code></pre><div class="info ">
<code class="code">reset_ibuf ibuf</code> returns the <code class="code">image</code> currently in <code class="code">ibuf</code> and resets it.<br>
</div>

<pre><span id="VALformatter_of_image_buffer"><span class="keyword">val</span> formatter_of_image_buffer</span> : <code class="type"><a href="Notty.I.Fmt.html#TYPEibuf">ibuf</a> -> Format.formatter</code></pre><div class="info ">
<code class="code">formatter_of_image_buffer ibuf</code> is a fresh pretty-printing <code class="code">formatter</code>
        that:
<p>

        <ul>
<li>Outputs to the image buffer <code class="code">ibuf</code>.</li>
<li>Supports <a href="Notty.I.Fmt.html#attrtags">attribute tags</a>.</li>
</ul>
<br>
</div>
<br>
<h2 id="2_Attributeinsertion">Attribute insertion</h2>
<p>

        Insert <a href="Notty.I.Fmt.html#VALattr"><code class="code">attr</code></a> values into image formatters.<br>

<pre><span id="VALattr"><span class="keyword">val</span> attr</span> : <code class="type"><a href="Notty.html#TYPEattr">attr</a> -> (Format.formatter -> 'a -> 'b) -> Format.formatter -> 'a -> 'b</code></pre><div class="info ">
<code class="code">attr a f</code> is a pretty-printer like <code class="code">f</code>, except its output is styled
        with <code class="code">a</code>. This applies only outside of any styling <code class="code">f</code> itself might
        embed.<br>
</div>

<pre><span id="VALpp_open_attribute_tag"><span class="keyword">val</span> pp_open_attribute_tag</span> : <code class="type">Format.formatter -> <a href="Notty.html#TYPEattr">attr</a> -> unit</code></pre><div class="info ">
<code class="code">pp_open_attribute_tag formatter attr</code> opens an attribute tag.
        Formatted material enclosed by this tag is styled with <code class="code">attr</code>, unless
        overridden by an inner tag.<br>
</div>
<br>
<h2 id="attrtags">Attribute tags</h2>
<p>

        <b>TL;DR:</b> <code class="code"><span class="string">"def @{&lt;red&gt; red @{&lt;white/blue&gt; white on blue @} red @} def"</span></code>.
<p>

        Image formatters interpret <code class="code"><span class="constructor">Format</span></code>'s <em>semantics tags</em> and use them
        for setting attributes. This allows embedding of attributes directly
        into format strings.
<p>

        For more info on tag usage, consult the <a href="
        http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html"><code class="code"><span class="constructor">Format</span></code></a>
        documentation.
<p>

        Attributes are represented in the form <code class="code">fg/bg/st</code>.
<p>

        <code class="code">fg</code> (resp. <code class="code">bg</code>) is the ANSI name of the foreground (resp. background)
        color. Lowercase names mean the <a href="Notty.A.html#corecolors">dim</a>, uppercase names
        mean the <a href="Notty.A.html#corecolors">light</a> variants, and representation of colors
        beyond the core 16 is private.
<p>

        <code class="code">st</code> is any combination of letters <code class="code">b</code> (bold), <code class="code">i</code> (italic), <code class="code">u</code>
        (underline), <code class="code">k</code> (blink) and <code class="code">r</code> (reverse).
<p>

        Any of the three components may be missing, and trailing <code class="code">/</code> characters
        can be omitted.
<p>

        Invalid tags are mapped to <a href="Notty.A.html#VALempty"><code class="code"><span class="constructor">A</span>.empty</code></a>.
<p>

        For example:
        <ul>
<li><code class="code"><span class="string">"red/black/b"</span></code> ~ <code class="code">fg red ++ bg black ++ st bold</code></li>
<li><code class="code"><span class="string">"GREEN/black"</span></code> ~ <code class="code">fg lightgreen ++ bg black</code></li>
<li><code class="code"><span class="string">"red//ku"</span></code> ~ <code class="code">fg red ++ st blink ++ st underline</code></li>
<li><code class="code"><span class="string">"/RED"</span></code> ~ <code class="code">bg lightred</code></li>
<li><code class="code"><span class="string">""</span></code> ~ <code class="code">empty</code></li>
</ul>
<br>
</body></html>